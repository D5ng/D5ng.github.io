---
title: 스코프
author: D5ng
date: 2023-02-06 00:01 +09:00
layout: post
category: JavaScript 핵심
---

### 스코프란 ?

스코프는 가장 쉽게 말해서 <span class="bg_strong">유효 범위</span>를 말한다.  
변수를 사용할때 예를 들어보자면, 변수를 사용할 수 있는곳이 있고 사용 못하는 곳이 있다.  
이게 스코프다. 추가적으로 <span class="bg_strong">함수의 매개변수는 함수 내부에서만 사용할 수 있는 변수</span>이다.  
따라서 이건 함수몸체에서만 사용할 수 있는 스코프(유효범위)라는 것이다.

> <span class="bg_strong">모든 식별자는 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위가 결정된다.</span>

### 스코프의 종류

- 전역
- 지역

❗️var, let, const로 선언한 변수들은 스코프가 서로 다르게 동작한다.

### 전역과 지역

전역은 코드의 가장 바깥쪽을 말한다.  
지역은 함수의 몸체 내부를 말한다. **(함수 레벨 스코프, 블록 스코프에 따라 다르다.)**

```js
// 새로운 파일만들고 바로 코드를 쓰면 그게 전역이다.
// 변수를 사용했기에 아래 코드를 전역변수라고 한다.
const global = "이게 전역이다.";

// 이 함수는 전역에 있는 전역 함수다.
function globalFunc() {
	// 지역변수는 자신의 지역 스코프와 하위지역에서만 사용 가능하다.
	// 따라서 지역스코프와 하위지역을 제외한 전역에서는 local을 찾을 수가 없다.
	// 서로 다른 스코프에 있는 변수이기 때문이다.
	const local = "const는 블록 스코프니까 지역변수인거다.";

	function 중첩된함수() {
		// 함수안에 함수가 있기 때문에 이건 지역함수다.
		console.log(local); // 하위지역에서 local을 참조할 수 있고 전역변수도 참조 할 수 있다.
		console.log(없는변수);
	}

	중첩된함수();
}

globalFunc();
```

### 스코프 체인

<span class="bg_strong">함수는 중첩될 수 있기때문에 스코프가 함수의 중첩에 의해 계층적 구조를 갖는다. </span>  
모든 스코프는 하나의 계층적 구조로 연결되기에 지역 스코프의 최상위 스코프는 전역 스코프가 된다.  
<span class="bg_strong">스코프가 계층적으로 연결된 것을 스코프 체인</span> 이라고 한다.

변수를 참조할 때 스코프 체인을 통해서 변수를 참조하는 코드의 스코프에서 시작을해서 상위 스코프로 타고 올라가면서 변수를 찾는다.

<br />
위 예제에서는 중첩된 함수에 변수명: (없는변수)를 찾을때 먼저 자신의 스코프에서 찾고, 없으면 상위 스코프로 쭉 올라가서 찾다가 못찾으면 Reference Error (참조할 수 없을때 발생하는 에러)가 나오게된다.

<br />
> 상위 스코프에서 유효한 변수는 하위 스코프에서 자유롭게 참조할 수 있지만 하위 스코프에서 유효한 변수를 상위 스코프에서는 찾을 수 없다.

<br />
### 렉시컬 스코프 (정적 스코프)

렉시컬 스코프란 함수를 어디서 호출했는지가 아니라, <span class="bg_strong">함수를 어디서 정의했는지에 따라 상위 스코프를 결정</span>한다.  
자바스크립트는 렉시컬 스코프를 따르기때문에 함수가 어디서 호출된건지는 전혀 상관이없다.  
어디에 정의했는지가 가장 중요하다.

```js
var name = "dong";

function rename() {
	var name = "hyun";
	print(); // 렉시컬 스코프는 호출에 전혀 상관이없다. 따라서 함수가 전역에 정의된 시점인
	// name을 찾기때문에 'dong'을 출력하게 된다.
}

function print() {
	console.log(name);
}

rename(); // 전역스코프에 생성된 함수다.
print(); // 전역스코프에 생성된 함수다. var는 함수 레벨 스코프이기때문에 'dong'이 출력된다.
```

#### 참고자료.

- 출처 - [자바스크립트 Deep Dive](https://wikibook.co.kr/mjs/)
- 링크 - [웹 튜토리얼 이웅모](https://poiemaweb.com/)
- 저자 - 이웅모
- 출판사 - 위키북스
